<div class="m-0" *ngIf="leaderboard!=null; else elseBlock">
  <div class="mt-3 mb-3 ms-5 me-5">
    <ng-multiselect-dropdown
      [placeholder]="'Select Tests'"
      [settings]="dropdownSettings"
      [data]="leaderboard.testRecords"
      [(ngModel)]="chosenTestRecords">
    </ng-multiselect-dropdown>
  </div>
  <table *ngIf="!leaderboard.userRecords.empty; else emptyBlock" class="table table-bordered">
    <thead>
    <tr class="table-secondary">
      <th class="text-center align-middle" scope="col" style="width: 2.5%">â„–</th>
      <th class="text-center align-middle" scope="col" style="width: 10%">Student</th>
      <th class="text-center align-middle" scope="col" style="width: 2.5%">Total</th>
      <th
        *ngFor="let iterTestRecord of chosenTestRecords"
        [style.width.%]="85 / chosenTestRecords.length"
        class="text-center align-middle" scope="col">
        <a [routerLink]="['/test']" [queryParams]="{id: iterTestRecord.id}">{{iterTestRecord.name}}</a>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr
      *ngFor="let userRecord of leaderboard.userRecords.content; index as i"
      [ngClass]="{'table-info': userRecord.nickname == nickName}">
      <td class="text-center align-middle">{{leaderboard.userRecords.number * pageSize + i + 1}}</td>
      <th class="text-center align-middle" scope="row">{{userRecord.nickname}}</th>
      <td class="text-center align-middle">{{userRecord.total.toFixed(2)}}</td>
      <td
        *ngFor="let testRecord of chosenTestRecords"
        class="text-center align-middle">
        <a *ngIf="isTeacher; else textBlock" [routerLink]="'/attempt'"
           [queryParams]="{user: userRecord.id,test:testRecord.id}">
          {{userRecord.testToScoreMap.get(testRecord.id.toString())?.toFixed(2) }}
        </a>
        <ng-template #textBlock>
          {{userRecord.testToScoreMap.get(testRecord.id.toString())?.toFixed(2) }}
        </ng-template>
      </td>
    </tr>
    </tbody>
  </table>
  <app-pagination [page]="leaderboard.userRecords" [baseUrl]="'/leaderboard'"></app-pagination>
</div>
<ng-template #emptyBlock>
  <h1 class="text-center m-5 p-5">Nobody is here!</h1>
</ng-template>
<ng-template #elseBlock>
  <app-loading [text]="'Loading...'"></app-loading>
</ng-template>
